<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Math Graph Plotter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>
</head>
<body class="bg-gradient-to-r from-purple-300 via-pink-200 to-red-200 text-gray-900">

  <!-- Navigation -->
  <nav class="bg-purple-700 text-white p-4 shadow-lg flex justify-between">
    <h1 class="font-bold text-xl">ðŸ“Š Graph Plotter</h1>
    <div class="space-x-4">
      <a href="index.html" class="hover:text-yellow-300">Home</a>
      <a href="calculator.html" class="hover:text-yellow-300">Calculator</a>
      <a href="graph.html" class="hover:text-yellow-300">Graph Plotter</a>
      <a href="about.html" class="hover:text-yellow-300">About</a>
    </div>
  </nav>

  <!-- Graph Section -->
  <section class="h-screen flex flex-col justify-center items-center">
    <div class="bg-white bg-opacity-90 p-8 rounded-2xl shadow-xl w-2/3">
      <h2 class="text-2xl font-bold text-center mb-4">Graph Plotter</h2>
      <input id="functionInput" type="text" placeholder="Enter function e.g. sin(x), cos(x), x^2"
             class="w-full p-3 mb-4 border rounded-lg text-center text-lg">

      <div class="flex justify-center gap-4">
        <button onclick="plotGraph()" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-800">
          Plot Graph
        </button>
        <button onclick="downloadGraph()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-800">
          Download Graph
        </button>
      </div>

      <div id="graph" class="mt-6"></div>
    </div>
  </section>

  <script>
    function plotGraph() {
      let expr = document.getElementById("functionInput").value;
      let xValues = [];
      let yValues = [];
      for (let x = -10; x <= 10; x += 0.1) {
        try {
          let y = math.evaluate(expr, {x:x});
          xValues.push(x);
          yValues.push(y);
        } catch {
          alert("Invalid function!");
          return;
        }
      }
      let trace = {x: xValues, y: yValues, type: "scatter", line: {color: "blue"}};
      let layout = {title: `Graph of ${expr}`, xaxis: {title: "x"}, yaxis: {title: "y"}};
      Plotly.newPlot("graph", [trace], layout);
    }

    function downloadGraph() {
      Plotly.downloadImage("graph", {format: "png", filename: "math_graph"});
    }
  </script>
</body>
</html>

